<template name="categories_selector">

    <select class="attr form-control {{#if small}}form-control-sm{{/if}}" name="categoryId" id="{{id}}" required disabled="{{unready}}">

        <option disabled selected="{{selectedValue null}}" value="">Select a Category ...</option>

        {{#if isAnonymous}}

            {{#each category in systemCategories}}
                <option value="{{category._id}}" selected="{{selectedValue category._id}}">
                    {{categoryLabel category}}
                </option>
            {{/each}}

        {{else}}

            {{#if collectionNotEmpty privateCategories}}
                <optgroup label="Private">
                    {{#each category in privateCategories}}
                        <option value="{{category._id}}" selected="{{selectedValue category._id}}">
                            {{categoryLabel category}}
                        </option>
                    {{/each}}
                </optgroup>
            {{/if}}

            <optgroup label="Community">
                {{#each category in publicCategories}}
                    <option value="{{category._id}}" selected="{{selectedValue category._id}}">
                        {{categoryLabel category}}
                    </option>
                {{/each}}
            </optgroup>

            <optgroup label="System">
                {{#each category in systemCategories}}
                    <option value="{{category._id}}" selected="{{selectedValue category._id}}">
                        {{categoryLabel category}}
                    </option>
                {{/each}}
            </optgroup>

        {{/if}}

    </select>

</template>