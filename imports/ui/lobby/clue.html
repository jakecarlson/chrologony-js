<template name="clue">

    <tr
        class="
            clue
            {{#if editing}}
                editing
                {{#if error}}
                    table-danger
                {{else}}
                    {{#if id}}
                        table-warning
                    {{else}}
                        table-success
                    {{/if}}
                {{/if}}
            {{else}}
                viewing
                {{#if selected}}
                    table-primary
                {{/if}}
            {{/if}}
        "
    >

        <td>
            {{#if clue}}
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" name="id" id="clue-{{id}}" value="{{id}}" disabled="{{editing}}">
                </div>
            {{/if}}
        </td>

        <td>
            <textarea class="attr form-control form-control-sm {{#if viewing}}d-none{{/if}}" name="description" required maxlength="240" rows="1">{{description}}</textarea>
            <label class="{{#if editing}}d-none{{/if}}" for="clue-{{id}}">{{description}}</label>
        </td>

        <td colspan="{{#if clue}}1{{else}}3{{/if}}">
            <input class="attr form-control form-control-sm {{#if viewing}}d-none{{/if}}" type="date" name="date" value="{{date}}" required maxlength="10">
            <span class="{{#if editing}}d-none{{/if}}">{{date}}</span>
        </td>

        {{#if clue}}
            <td>
                <a href="#" class="categories" data-id="{{id}}" title="Manage Categories"><i class="fa fa-folder table-icon"></i></a>
            </td>
            <td>
                <a href="#" class="more" data-id="{{id}}" title="More Info"><i class="fa fa-info-circle table-icon"></i></a>
            </td>
        {{/if}}

        <td>

            {{#if canEdit}}

                <form class="clue-edit {{#if viewing}}d-none{{/if}}">

                    <input class="attr" type="hidden" name="categoryId" value="{{categoryId}}">

                    {{#if clue}}

                        <input class="attr" type="hidden" name="_id" value="{{id}}">
                        <button type="submit" class="save btn btn-primary btn-sm mr-0 mr-md-2" disabled="{{loading}}">
                            <i class="fa fa-check"></i>
                            <span class="d-none d-xl-inline">Save</span>
                        </button>

                        <button type="submit" class="cancel btn btn-light btn-sm mr-0 mr-md-2">
                            <i class="fa fa-times"></i>
                            <span class="d-none d-xl-inline">Cancel</span>
                        </button>

                        {{#if canRemove}}
                            <button
                                type="button"
                                class="btn btn-outline-danger btn-sm ml-2 float-right"
                                data-toggle="modal"
                                data-target="#removeClue"
                                data-id="{{id}}"
                            >
                                <i class="fa fa-trash"></i>
                                <span class="d-none d-xl-inline">Remove</span>
                            </button>
                        {{/if}}

                    {{else}}

                        <button type="submit" class="add btn btn-primary btn-sm" disabled="{{loading}}">
                            <i class="fa fa-plus"></i>
                            <span class="d-none d-xl-inline">Add</span>
                        </button>

                    {{/if}}

                </form>

                <button class="edit btn btn-light btn-sm {{#if editing}}d-none{{/if}}">
                    <i class="fa fa-pencil"></i>
                    <span class="d-none d-xl-inline">Edit</span>
                </button>

            {{/if}}

        </td>
    </tr>

</template>