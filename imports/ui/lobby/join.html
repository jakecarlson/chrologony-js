<template name="join">

    <div id="join" class="full-width card border-primary text-white mx-auto mb-4">

        <header class="card-header bg-primary">
            <h1 class="card-title text-white float-left">Join a Game</h1>
            <button class="btn btn-success float-right" title="Create a New Game" data-toggle="modal" data-target="#gameCreatorModal">
                Create a New Game
            </button>
        </header>

        {{#if collectionNotEmpty games}}

            <ul id="joinGames" class="list-group list-group-flush">
                {{#each game in games}}

                    <li
                        class="
                            game
                            {{#if hasPassword game}}
                                game-password
                            {{else}}
                                game-open
                            {{/if}}
                            px-3 pt-3 pb-2
                        "
                        data-id="{{game._id}}"
                        data-toggle="{{#if hasPassword game}}modal{{/if}}"
                        data-target="{{#if hasPassword game}}#passwordModal{{/if}}"
                    >
                        <div class="row">
                            <div class="col-12 col-sm-6">
                                <h2 class="game-title">
                                    <i class="fa {{#if hasPassword game}}fa-lock text-danger{{else}}fa-unlock-alt text-success{{/if}}"></i>
                                    {{title game}}
                                </h2>
                                <p class="game-created mb-1 mb-sm-0">
                                    {{#if game.startedAt}}
                                        Started {{relativeTime game.startedAt}};
                                    {{/if}}
                                    Created {{relativeTime game.createdAt}}
                                </p>
                            </div>
                            <dl class="col-12 col-sm-6 game-meta">
                                <dt>
                                    <i class="fa fa-folder" title="Category"></i>
                                </dt>
                                    <dd>{{category game}}</dd>
                                <dt>
                                    <i class="fa fa-user" title="# Players"></i>
                                </dt>
                                    <dd>{{numPlayers game}} <span class="d-none d-md-inline">{{playersStr game}}</span></dd>
                                <dt>
                                    <i class="fa fa-asterisk" title="Difficulty"></i>
                                </dt>
                                    <dd>{{difficulty game}} <span class="d-none d-md-inline">Difficulty</span></dd>
                                <dt>
                                    <i class="fa fa-certificate" title="Win Condition"></i>
                                </dt>
                                    <dd>{{winCondition game}} <span class="d-none d-md-inline">Cards</span></dd>
                                <dt>
                                    <i class="fa fa-clock-o" title="Guess Time Limit"></i>
                                </dt>
                                    <dd>{{guessTime game}} <span class="d-none d-md-inline">Guess Time Limit</span></dd>
                            </dl>
                        </div>

                        {{#if isOwner game}}
                            <i
                                class="fa fa-star text-active game-owner"
                                data-toggle="tooltip"
                                data-placement="top"
                                data-original-title="You own this game."
                            ></i>
                        {{/if}}

                        <i
                            class="
                                fa
                                fa-circle
                                game-status
                                text-{{statusColor game}}
                            "
                            data-toggle="tooltip"
                            data-placement="top"
                            data-original-title="{{statusMsg game}}"
                        ></i>

                    </li>

                {{/each}}
            </ul>

        {{else}}

            <p class="card-body text-dark text-center">There are currently no games to join. <a href="#" data-toggle="modal" data-target="#gameCreatorModal">Create one now!</a></p>

        {{/if}}

    </div>

    <div class="modal fade" id="passwordModal" tabindex="-1" role="dialog" aria-labelledby="passwordModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
            <div class="modal-content border-primary">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="passwordModalTitle">Enter the Game Password</h5>
                    <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body p-0">
                    <form class="form-inline justify-content-center p-2" id="joinPassword">
                        <label class="sr-only" for="gamePassword">Email</label>
                        <input type="password" name="password" class="form-control mr-2 attr" id="gamePassword" placeholder="Password">
                        <button type="submit" class="btn btn-primary">Join</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

</template>