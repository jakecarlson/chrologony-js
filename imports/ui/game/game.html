<template name="game">

    <section id="game" class="{{#if fullBoard}}full-width{{else}}columns{{/if}}">

        {{#if dataReady}}

            <header class="clearfix mb-4">

                <h1 class="float-sm-left text-white text-center mb-2 mb-sm-0" id="gameTitle">{{title}}</h1>

                <div class="float-sm-right text-center mb-2" id="gameMenu">

                    {{#if isOwner}}

                        {{#if inProgress}}

                            <button
                                class="btn btn-warning {{#if manualEndOnly}}btn-lg{{/if}} mr-2 end"
                                disabled="{{loading}}"
                            >
                                <i class="fa fa-stop-circle"></i>
                                <span class="d-none d-md-inline">End</span>
                            </button>

                            <button
                                class="btn btn-danger mr-2 abandon"
                                disabled="{{loading}}"
                            >
                                <i class="fa fa-remove"></i>
                                <span class="d-none d-md-inline">Abandon</span>
                            </button>

                        {{else}}
                            {{#unless ended}}
                                <button
                                    class="btn btn-lg btn-success {{#if manualEndOnly}}btn-lg{{/if}} mr-2 start"
                                    disabled="{{loading}}"
                                >
                                    <i class="fa fa-play-circle"></i>
                                    <span class="d-none d-md-inline">Start</span>
                                </button>
                            {{/unless}}
                        {{/if}}

                    {{/if}}

                    <div class="dropdown d-inline-block mr-2">
                        <button class="btn btn-light" type="button" id="invitePlayersButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-paper-plane"></i>
                            <span class="d-none d-md-inline">Invite</span>
                        </button>
                        <div class="dropdown-menu dropdown-menu-right invite-menu" aria-labelledby="invitePlayersButton">

                            {{#if password}}
                                <a
                                    class="dropdown-item password"
                                    data-clipboard-text="{{password}}"
                                    data-placement="top"
                                    data-trigger="manual"
                                    title="Game Password copied to your clipboard!"
                                    href="{{password}}"
                                >
                                    <i class="fa fa-key"></i>
                                    Password: <strong>{{password}}</strong>
                                </a>
                            {{/if}}

                            <a
                                class="dropdown-item link"
                                data-clipboard-text="{{link}}"
                                data-placement="top"
                                data-trigger="manual"
                                title="Game URL copied to your clipboard!"
                                href="{{link}}"
                            >
                                <i class="fa fa-link"></i>
                                Copy Game Link
                            </a>
                            <a
                                class="dropdown-item invite"
                                data-toggle="modal"
                                data-target=".invite-modal"
                                href="#"
                            >
                                <i class="fa fa-envelope"></i>
                                Send Invitation
                            </a>

                        </div>
                    </div>

                    {{#if fullBoard}}
                        <button
                            class="btn btn-light d-none d-lg-inline mr-2 board-columns"
                            disabled="{{loading}}"
                        >
                            <i class="fa fa-columns"></i>
                            Columns
                        </button>
                    {{else}}
                        <button
                            class="btn btn-light d-none d-lg-inline mr-2 board-full"
                            disabled="{{loading}}"
                        >
                            <i class="fa fa-arrows-h"></i>
                            Full Width
                        </button>
                    {{/if}}

                    <button
                        class="btn btn-light d-inline-block leave"
                        disabled="{{loading}}"
                    >
                        <i class="fa fa-sign-out"></i>
                        <span class="d-none d-md-inline">Leave</span>
                    </button>

                </div>

            </header>

            <div class="{{#if columnLayout}}row{{/if}}">

                <div class="{{#if columnLayout}}col-lg-9{{/if}}" id="gameMain">

                    {{> board game=currentGame turn=currentTurn}}

                    {{#if showPlayerCards}}
                        <div id="playerCards" class="mb-4 {{#if columnLayout}}mb-lg-0{{/if}}">
                            <h2 id="playerCardsTitle" class="text-white text-center text-sm-left mb-4">
                                {{#if gameInProgress}}
                                    Other
                                {{/if}}
                                Player Cards
                            </h2>
                            {{#each player in players}}
                                {{#if isNotCurrentPlayer player}}
                                    {{> player_cards game=currentGame turn=currentTurn player=player}}
                                {{/if}}
                            {{/each}}
                        </div>
                    {{/if}}

                </div>

                <div class="{{#if columnLayout}}col-lg-3{{/if}}" id="gameSide">

                    {{> players_list game=currentGame turn=currentTurn}}

                    {{> options game=currentGame}}

                </div>

            </div>

            {{> clue_more clue=clueMore game=currentGame}}

        {{/if}}

    </section>

    <div class="modal fade invite-modal" id="passwordModal" tabindex="-1" role="dialog" aria-labelledby="inviteTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
            <div class="modal-content border-primary">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="inviteTitle">Invite a Player</h5>
                    <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body p-0">
                    <form class="form-inline justify-content-center p-2" id="invitePlayer">
                        <label class="sr-only" for="inviteEmail">Email</label>
                        <input type="email" name="email" class="form-control mr-2 attr" id="inviteEmail" placeholder="Email">
                        <button type="submit" class="btn btn-primary"><i class="fa fa-paper-plane"></i> Invite</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

</template>